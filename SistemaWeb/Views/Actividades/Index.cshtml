@model IEnumerable<SistemaWeb.Models.Actividad>

@{
    Layout = null; /* Ignoramos el layout roto del proyecto */
}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reporte Completo</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        /* FONDO NEGRO MATE */
        body {
            background-color: #121212;
            color: #e0e0e0;
            font-family: 'Segoe UI', sans-serif;
            min-height: 100vh;
            display: flex;
            align-items: flex-start; /* Alineado arriba para permitir scroll */
            justify-content: center;
            padding-top: 40px;
            padding-bottom: 40px;
        }

        /* HOJA DE CÁLCULO FLOTANTE */
        .excel-sheet {
            background-color: #ffffff;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 0 40px rgba(0,0,0, 1);
            width: 100%;
            max-width: 1400px;
        }

        /* ESTILO TABLA EXCEL */
        .table-excel {
            border: 2px solid #333;
        }

            .table-excel th, .table-excel td {
                border: 1px solid #adb5bd !important;
                vertical-align: middle;
                text-align: center;
                font-size: 0.9rem;
                color: #333; /* Texto negro dentro de la tabla */
            }

            /* ENCABEZADOS */
            .table-excel thead th {
                background-color: #212529;
                color: #ffffff;
                font-weight: 900;
                font-style: italic;
                text-transform: uppercase;
                border-bottom: 3px solid #000 !important;
                padding: 15px;
            }

            /* HOVER */
            .table-excel tbody tr:hover {
                background-color: #fff3cd;
                transition: 0.1s;
            }

        .btn-action {
            border-radius: 50px;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="container-fluid">
        <div class="row justify-content-center">
            <div class="col-12 col-xl-10">

                <div class="excel-sheet">

                    <div class="d-flex justify-content-between align-items-center mb-4 pb-2 border-bottom">
                        <h3 class="m-0 text-dark fw-bold fst-italic">
                            🚀 REPORTE DE ACTIVIDADES (TOTAL)
                        </h3>
                        <a href="/Actividades/Crear" class="btn btn-dark btn-sm px-4 rounded-pill fw-bold shadow">
                            ➕ NUEVO REGISTRO
                        </a>
                    </div>

                    <div class="table-responsive">
                        <table class="table table-excel table-hover mb-0">
                            <thead>
                                <tr>
                                    <th style="width: 10%;">🆔 CÓDIGO</th>
                                    <th style="width: 25%;">📝 ACTIVIDAD</th>
                                    <th style="width: 12%;">📅 FECHA</th>
                                    <th style="width: 15%;">📍 LUGAR</th>
                                    <th style="width: 12%;">🎯 ENFOQUE</th>
                                    <th style="width: 8%;">👥 CUPO</th>
                                    <th style="width: 8%;">⚡ ESTADO</th>
                                    <th style="width: 10%;">🔧 ACCIONES</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model)
                                {
                                    <tr>
                                        <td class="fw-bold text-secondary">@item.Codigo</td>

                                        <td class="text-start ps-4 fw-bold text-dark">
                                            @item.Nombre
                                        </td>

                                        <td>@item.FechaRealizacion.ToString("dd/MM/yyyy")</td>

                                        <td>@item.Lugar</td>

                                        <td>
                                            @{
                                                string claseBadge = "bg-light text-dark border";
                                                if (item.TipoDiscapacidad.Contains("Visual")) { claseBadge = "bg-dark text-warning border-warning"; }
                                                else if (item.TipoDiscapacidad.Contains("Auditiva")) { claseBadge = "bg-primary text-white border-primary"; }
                                                else if (item.TipoDiscapacidad.Contains("Motriz")) { claseBadge = "bg-danger text-white border-danger"; }
                                            }
                                            <span class="badge @claseBadge rounded-pill fw-normal">
                                                @item.TipoDiscapacidad
                                            </span>
                                        </td>

                                        <td class="fw-bold">@item.Cupo</td>

                                        <td>
                                            @if (item.Estado)
                                            {
                                                <span class="badge bg-success bg-opacity-75 text-white">Activo</span>
                                            }
                                            else
                                            {
                                                <span class="badge bg-secondary">Inactivo</span>
                                            }
                                        </td>

                                        <td>
                                            <a href="/Actividades/Editar?id=@item.Codigo" class="btn btn-outline-dark btn-sm btn-action" title="Editar">✏️</a>

                                            <a href="/Actividades/Eliminar?id=@item.Codigo"
                                               class="btn btn-outline-danger btn-sm btn-action"
                                               title="Eliminar"
                                               onclick="return confirm('¿Estás seguro de que deseas eliminar la actividad @item.Codigo?');">
                                                🗑️
                                            </a>
                                        </td>
                                    </tr>
                                }

                                @if (!Model.Any())
                                {
                                    <tr>
                                        <td colspan="8" class="py-5 text-muted">
                                            📭 No hay datos disponibles.
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>

                    <div class="mt-3 text-end text-muted small border-top pt-2 fst-italic">
                        Total de registros cargados: <strong>@Model.Count()</strong>
                    </div>

                </div>
            </div>
        </div>
    </div>

</body>
</html>